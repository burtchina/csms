# 校园安全管理系统(CSMS) 用户手册

## 目录

1. [系统简介](#系统简介)
2. [登录与注册](#登录与注册)
3. [系统主界面](#系统主界面)
4. [设备管理](#设备管理)
5. [故障管理](#故障管理)
6. [维护管理](#维护管理)
7. [性能监控](#性能监控)
8. [系统设置](#系统设置)
9. [网络设备通信](#网络设备通信)
10. [常见问题](#常见问题)

## 系统简介

校园安全管理系统(CSMS)是一款专为学校安全管理部门设计的综合性管理平台。系统提供设备管理、故障监控、维护排期、性能分析等功能，帮助管理人员高效管理校园安全设备，提升校园安全水平。系统支持多种网络协议与设备通信，实现设备状态实时监控和远程操作。

## 登录与注册

### 登录系统

1. 在浏览器中访问系统地址：`http://localhost:5000`（或您的系统部署地址）
2. 在登录页面输入用户名和密码
3. 勾选"记住我"可在一周内保持登录状态
4. 点击"登录"按钮进入系统

![登录界面](images/login.png)

### 注册账号

1. 在登录页面点击"没有账号？去注册"链接
2. 填写用户名、电子邮箱和密码
3. 确认密码后点击"注册"按钮
4. 管理员审核通过后即可使用新账号登录系统

### 忘记密码

1. 在登录页面点击"忘记密码"链接
2. 输入注册时使用的电子邮箱
3. 点击"发送重置链接"
4. 系统将发送密码重置邮件，按照邮件中的说明操作

## 系统主界面

成功登录后，您将看到系统主界面，包括以下部分：

1. **侧边导航栏**：包含系统名称、用户信息和主要功能模块入口
2. **顶部状态栏**：包含通知中心、快速搜索和用户菜单
3. **主仪表盘**：展示系统概况和重要指标
4. **快速导航卡片**：快速访问常用功能
5. **系统状态摘要**：显示设备状态、故障和告警信息

![系统主界面](images/dashboard.png)

### 主界面元素

- **侧边导航栏**：您可以点击左上角的汉堡菜单图标收起/展开导航栏
- **通知中心**：点击顶部栏的铃铛图标查看系统通知
- **用户菜单**：点击顶部栏的用户头像访问个人设置和退出选项
- **状态卡片**：主面板上的卡片显示系统关键指标，点击可进入相应功能页面

## 设备管理

设备管理模块用于管理校园内所有安全设备的信息、状态和配置。

### 设备列表

设备列表页面显示系统中所有设备的基本信息，包括：

- 设备名称和图标
- 设备类型
- 设备状态（在线/离线/维护中）
- 位置信息
- IP地址
- 最后维护时间

您可以通过以下功能快速找到需要的设备：

- **搜索**：在搜索框中输入关键词
- **筛选**：使用类型、状态、位置等筛选器
- **排序**：点击列标题对数据进行排序
- **分页**：使用底部分页控件浏览更多设备

### 添加设备

1. 在设备列表页面点击"添加设备"按钮
2. 填写设备基本信息
   - 设备名称和分类
   - 选择设备类型
   - 设备型号
   - 设备位置
3. 填写设备网络信息
   - IP地址
   - MAC地址
   - 通信协议选择
   - 登录凭证（用户名、密码）
4. 填写设备详细信息
   - 厂商信息
   - 序列号
   - 安装日期
   - 保修期限
5. 点击"保存"按钮完成添加

### 设备详情

点击设备列表中的设备名称，进入设备详情页面，您可以：

- **设备信息**：查看设备详细信息和规格参数
- **状态监控**：查看设备实时状态指标和图表
- **配置管理**：查看和修改设备配置
- **接口信息**：查看设备网络接口状态
- **事件记录**：查看设备历史故障和告警记录
- **维护记录**：查看设备维护历史和计划
- **附件管理**：管理设备相关文档和图片

### 设备批量导入

对于需要批量添加多个设备的情况，系统提供了批量导入功能：

1. 在设备列表页面点击"批量导入"按钮
2. 下载Excel模板并按格式填写设备信息
3. 上传填写好的Excel文件
4. 在预览页面确认导入数据无误
5. 点击"确认导入"按钮完成批量添加

### 设备状态监控

设备详情页中的状态监控选项卡显示设备的实时状态：

- **连接状态**：在线/离线/不稳定
- **性能指标**：CPU使用率、内存使用率、温度等
- **网络指标**：带宽使用、丢包率、延迟等
- **历史趋势**：性能指标的历史变化趋势图表

## 故障管理

故障管理模块用于处理设备故障报告、跟踪故障处理进度和分析故障数据。

### 故障列表

故障列表页面显示所有设备故障记录，包括：

- 故障ID和标题
- 设备名称
- 故障类型
- 严重程度（低/中/高/严重）
- 故障状态（待处理/处理中/已解决）
- 报告时间
- 处理人员

### 报告故障

1. 在故障列表页面点击"报告故障"按钮
2. 选择发生故障的设备
3. 输入故障标题
4. 选择故障类型
5. 设置严重程度
6. 详细描述故障情况
7. 上传相关图片或日志（可选）
8. 点击"提交"按钮

### 处理故障

1. 在故障列表中找到需要处理的故障记录
2. 点击"处理"按钮
3. 更新故障状态（处理中/已解决）
4. 记录故障原因分析
5. 填写处理措施
6. 添加解决方案
7. 上传处理结果图片（可选）
8. 点击"保存"按钮

### 故障分析

故障分析页面提供故障数据的统计和分析：

- **故障趋势图**：不同时间段故障数量对比
- **故障类型分布**：饼图显示不同类型故障的比例
- **设备故障率**：设备故障频率排行
- **平均解决时间**：各类故障的平均解决时间

## 维护管理

维护管理模块用于规划和记录设备的定期维护工作。

### 维护计划

维护计划页面显示所有设备的维护计划，包括：

- 维护ID和标题
- 设备名称
- 维护类型（例行检查/固件升级/硬件维护）
- 计划时间
- 预计持续时间
- 负责人
- 维护状态（计划中/进行中/已完成/已取消）

### 创建维护计划

1. 在维护计划页面点击"创建计划"按钮
2. 输入维护计划标题
3. 选择需要维护的设备
4. 选择维护类型
5. 设置计划开始和结束时间
6. 指定负责人
7. 添加维护说明和检查项目
8. 点击"保存"按钮

### 维护日历

维护日历视图以日历形式展示所有维护计划：

- 支持日/周/月不同视图切换
- 颜色区分不同维护状态和类型
- 点击日历项可查看详情
- 支持拖拽调整计划时间

### 记录维护结果

1. 在维护计划列表中找到已完成的维护任务
2. 点击"记录结果"按钮
3. 填写维护过程和结果
4. 更新设备状态和关键参数
5. 上传维护照片或文档
6. 添加后续建议（如需要）
7. 点击"提交"按钮

## 性能监控

性能监控模块用于实时监控和分析设备性能数据。

### 监控仪表盘

监控仪表盘展示设备关键性能指标，包括：

- **综合概览**：设备在线率、告警数量、性能异常数量等
- **设备状态图**：网络拓扑图显示设备连接和状态
- **关键指标**：重要性能指标的实时数据和趋势图
- **告警面板**：显示最近的性能告警信息

### 性能指标管理

1. 在性能监控页面点击"指标管理"标签
2. 查看系统支持的所有性能指标
3. 为不同设备启用或禁用特定指标
4. 自定义指标显示名称和单位
5. 配置数据采集频率

### 设置告警规则

1. 在性能监控页面点击"告警规则"标签
2. 点击"添加规则"按钮
3. 选择设备或设备组
4. 选择性能指标（如CPU使用率、温度等）
5. 设置告警条件
   - 阈值（如CPU>80%）
   - 持续时间（如持续5分钟）
   - 检查频率（如每分钟检查一次）
6. 设置告警级别（警告/严重）
7. 配置通知方式（邮件/短信/系统通知）
8. 点击"保存"按钮

### 性能数据分析

性能数据分析页面提供历史性能数据的深入分析：

- **趋势分析**：选择设备和指标查看长期趋势
- **对比分析**：多设备或多时间段数据对比
- **相关性分析**：分析不同指标间的相关性
- **报表生成**：生成性能分析报告并导出

## 系统设置

系统设置模块用于管理系统配置、用户和权限。

### 用户管理

管理员可以在用户管理页面：

- 查看所有用户列表
- 添加新用户
- 编辑用户信息
- 设置用户角色和权限
- 禁用/启用用户账号
- 重置用户密码

### 角色与权限

管理员可以在角色管理页面：

- 创建新角色
- 配置角色权限
- 查看现有角色权限
- 将用户分配到不同角色

### 系统参数配置

系统参数配置页面允许管理员设置系统的全局参数：

- 系统名称和描述
- 设备状态检测间隔
- 数据保留策略
- 告警通知配置
- 邮件服务器设置
- 短信网关配置

### 日志管理

日志管理页面允许查看系统日志：

- 操作日志：记录用户的操作历史
- 系统日志：记录系统级别的事件
- 安全日志：记录登录尝试和权限变更

## 网络设备通信

网络设备通信模块实现了与各类网络设备的通信和控制功能。

### 支持的协议

系统支持以下通信协议与设备交互：

- **SSH**：安全外壳协议，用于安全命令执行
- **Telnet**：用于基本命令执行（不推荐用于生产环境）
- **SNMP**：简单网络管理协议，用于状态监控和数据采集
- **HTTP/HTTPS**：用于支持Web API的设备管理

### 设备命令执行

在设备详情页的"命令控制台"选项卡中：

1. 选择通信协议（SSH/Telnet）
2. 输入要执行的命令
3. 设置超时时间（可选）
4. 点击"执行"按钮
5. 查看命令执行结果
6. 可将常用命令保存为模板

### 设备配置管理

在设备详情页的"配置管理"选项卡中：

1. 点击"获取配置"按钮读取设备当前配置
2. 查看和编辑配置文件
3. 点击"应用配置"将更改推送到设备
4. 支持配置版本历史管理和对比

### 批量操作

在设备列表页面：

1. 勾选多个设备
2. 点击"批量操作"按钮
3. 选择操作类型（重启/配置备份/命令执行等）
4. 输入操作参数
5. 点击"执行"按钮
6. 查看批量操作结果

## 常见问题

### 1. 设备无法连接

**问题描述**：添加设备后显示"无法连接"状态。

**可能原因**：
- 设备IP地址或端口错误
- 设备通信凭证（用户名/密码）错误
- 设备与服务器之间的网络不通
- 设备上的通信服务（SSH/SNMP等）未启用

**解决方案**：
- 验证设备IP地址和端口
- 检查通信凭证是否正确
- 使用Ping工具测试网络连通性
- 确认设备已启用相应的通信服务

### 2. 性能数据未显示

**问题描述**：设备状态显示在线，但性能数据图表为空。

**可能原因**：
- 性能数据采集任务未启动
- SNMP配置错误
- 设备不支持请求的性能指标

**解决方案**：
- 在系统设置中检查数据采集任务状态
- 验证设备的SNMP配置（团体字/版本等）
- 检查设备类型是否支持相应的性能指标

### 3. 系统加载缓慢

**问题描述**：系统界面加载缓慢，响应不及时。

**可能原因**：
- 设备数量过多或数据量过大
- 浏览器缓存过多
- 服务器资源不足

**解决方案**：
- 使用分页和筛选减少单次加载数据量
- 清除浏览器缓存
- 升级服务器配置或优化数据库
- 调整数据保留策略，归档历史数据

### 4. Jinja2模板错误

**问题描述**：访问某些页面出现500错误，日志中显示Jinja2相关错误。

**原因**：在Jinja2模板中错误使用了Python内置的`len()`函数获取集合长度。

**解决方案**：
- 在Jinja2模板中，应使用`|length`过滤器而非`len()`函数获取集合长度
- 如果您在开发自定义模板，请将`{{ len(devices) }}`修改为`{{ devices|length }}`

---

如有更多问题，请联系系统管理员或发送邮件至：support@csms.example.com 